{% extends "base.html" %}

{% block content %}
    <div class="qanda-container">
        <div class="qanda_container">
            <p>{{ post.title }}</p> {% comment %} 문의 내용 {% endcomment %}
            <p>{{ post.writer }}</p>
            <p>{{ post.content }}</p>
            <p>{{ post.created_date }}</p>
            <h3>댓글</h3>
<ul class="comments-list">
    {% for comment in comments %}
        <li class="comment">
            <strong>{{ comment.writer }}</strong>: {{ comment.content }}
            <span style="font-size: 12px; color: gray;">{{ comment.created_date }}</span>

            <!-- 대댓글 입력 폼 -->
            <form method="POST" class="reply-form">
                {% csrf_token %}
                <input type="hidden" name="parent_comment_id" value="{{ comment.id }}" />
                <input type="text" name="content" placeholder="답글 입력..." required />
                <button type="submit" class="btn btn-info">답글 작성</button>
            </form>

            <!-- 대댓글 목록 -->
            <ul class="replies">
                {% for reply in comment.comments.all %}
                    <li class="reply">▶️[답글] {{ reply.writer }}: {{ reply.content }}</li>
                {% endfor %}
            </ul>
        </li>
    {% empty %}
        <p>아직 댓글이 없습니다.</p>
    {% endfor %}
</ul>

<!-- 새 댓글 입력 -->
<form method="POST">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary">댓글 작성</button>
</form>
        </div>
    </div>
    <footer>
        <div class="footer-top">
            <a href="{% url 'demos:introduce' %}">Service</a>
            <a href="{% url 'demos:home' %}">About Us</a>
            <a href="{% url 'demos:home' %}">Guide Map</a>
            <a href="#">Q&A</a>
        </div>
        <div class="footer-bottom">
            <a href="{% url 'demos:github' %}"><i class="ri-github-fill"></i></a>
            <a href="{% url 'demos:email' %}"><i class="ri-mail-line"></i></a>
            <a href="{% url 'demos:insta' %}"><i class="ri-instagram-line"></i></a>
            <a href="{% url 'demos:facebook' %}"><i class="ri-facebook-circle-fill"></i></a>
        </div>
    </footer>
{% endblock %}