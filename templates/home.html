{% extends "base.html" %}

{% block content %}
    <div class="home-container">
        <div class="search-box">    
            <form id="searchForm">      
                <input class = 'form-control' type="input" name="search_txt" placeholder="검색어를 입력하세요" />
            </form>
        </div>
        <button class="search-btn" onclick="saveSearchTextAndRedirect()">
            주변 주차장 찾기
        </button>        
    </div>

    <footer>
        <div class="footer-top">
            <a href="{% url 'demos:introduce' %}">Service</a>
            <a href="{% url 'demos:home' %}">About Us</a>
            <a href="{% url 'demos:home' %}">Guide Map</a>
            <a href="#">Q&A</a>
        </div>
        <div class="footer-bottom">
            <a href="{% url 'demos:github' %}"><i class="ri-github-fill"></i></a>
            <a href="{% url 'demos:email' %}"><i class="ri-mail-line"></i></a>
            <a href="{% url 'demos:insta' %}"><i class="ri-instagram-line"></i></a>
            <a href="{% url 'demos:facebook' %}"><i class="ri-facebook-circle-fill"></i></a>
        </div>
    </footer>
    <script>
        function saveSearchTextAndRedirect() {
            const searchValue = document.querySelector("input[name='search_txt']").value;
            localStorage.setItem('search_txt', searchValue);
            window.location.href = "{% url 'demos:map' %}";
        }

        document.addEventListener("DOMContentLoaded", function () {
            var searchForm = document.getElementById("searchForm");
            var searchInput = document.querySelector("input[name='search_txt']");

            searchForm.addEventListener("submit", function (event) {
                event.preventDefault(); 
                saveSearchTextAndRedirect(); 
            });
            searchInput.addEventListener("keydown", function (event) {
                if (event.key === "Enter") {
                    event.preventDefault();
                    saveSearchTextAndRedirect(); 
                }
            });
        });
        </script>
{% endblock %}